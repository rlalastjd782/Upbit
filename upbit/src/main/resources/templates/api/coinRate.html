<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="UTF-8">
<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
	crossorigin="anonymous">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<script type="text/javascript"
	src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://kit.fontawesome.com/9fc33e8a03.js" crossorigin="anonymous"></script>
<title>Welcome Coin</title>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">Easy-Pick CoinMarket</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarColor01"
				aria-controls="navbarColor01" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarColor01">
								<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" th:href=@{/}>Home</a></li>
					<li class="nav-item"><a class="nav-link"
						th:href=@{/v1/market/all}>코인상세정보</a></li>
					<li class="nav-item"><a class="nav-link" th:href=@{/graph}>코인그래프</a>
					<li class="nav-item"><a class="nav-link"
						th:href="@{/analysis}">상승하락급등분석</a></li>
					<li class="nav-item"><a class="nav-link" th:href="@{/ticker}">전체상승하락</a>
					</li>
						<li class="nav-item"><a class="nav-link" th:href="@{/tick}">주간상승률</a>
					</li>
						<li class="nav-item"><a class="nav-link" th:href="@{/calendar}">코인달력</a>
					</li>
						<li class="nav-item"><a class="nav-link" th:href="@{/grayscale}">그레이스케일포트폴리오</a>
					</li>
							<li class="nav-item"><a class="nav-link" th:href="@{/coinRate}">급등급락</a>
					</li>
				</ul>
				<form class="d-flex">
					<input class="form-control me-2" type="search" placeholder="Search"
						aria-label="Search">
					<button class="btn btn-outline-light" type="submit">Search</button>
				</form>
			</div>
		</div>
	</nav>
	<!-- 달력추가 -->	
	<div id = "calender" style="margin:8px;">
		<div> 원하는시간을 검색하세요</div>
		<input type='date' name='userBirthday' class = 'date' />
		<input type='time' name='time' value = "00:00:00"/>
		<input type= 'submit' name ="selectDate" id = 'select' value = "검색">
	</div>

	<form class = "input" id = "form" method="POST" action="coinRate">
		<input name = "inputText" value = "">
	</form>


	<div style="width:50%; float:left;">

		<table class="table" id="dataSelect">
		
			<thead>
			
				<tr >
					<th scope="col">코인이름</th>
					<th scope="col">코인가격(종가)</th>
					<th scope="col">거래대금</th>
					<th scope="col">거래시간</th>
					<th scope="col">랭킹</th>
					<th scope="col" >순위변동</th>
				</tr>
			</thead>
			
			<tbody >
					<tr id = "trmodel" th:each = "items : ${getModel}" >
						<td th:text = "${items.korean_name}"></td>
			 			<td id = "trmodeldata" th:text = "${items.trade_price}"></td>
						<td th:text = "${items.candle_acc_trade_price}"></td>
						<td th:text = "${items.candle_date_time_kst}"></td>
						<td id = "rank" th:text = "${items.ranking}" th:value="${items.ranking}"></td> 
						<td th:text = "0"></td>
					</tr>
			</tbody>
		</table>
	</div>
	
	<div style="width:50%; float:right;">
		<table class="table" id="data">
		</table>	
	</div>

	

	<!-- JavaScript Bundle with Popper -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
		crossorigin="anonymous"></script>

	<script>

/*<![CDATA[*/	
		
	// 시간 초기화 부분 (db에서 검색할 부분)
	
	$("form").hide();

	
	

		$('#select').on('click', function(){
			
			let inputText = $('input[name=userBirthday]').val();
			let inputText2 = $('input[name=time]').val();
			let t1 = inputText2[0];
			let t2 = inputText2[1];
			console.log(t1)
			console.log(t2)
			inputText2 = t1 + t2+ ":00";	
			let inputText3 = inputText + "T" + inputText2 + ":00";
			let data = $('input[name=inputText]').val(inputText3)
		/* 	let f = document.getElementById('form');
		    f.submit(); */
		    
		    $.ajax({
		    
		    	type : 'post',
		    	url : '/coinRateSend',
		    	dataType :"text",
		    	data : data,
		    	success : function(res){
		    		html = res;
					
					$("#data").append(html);
					
		    	},
		    	error : function(res){
		    		alert(res)
		    	}
		    	
		   
		    })
		    
		   $.ajax({
		    
		    	type : 'post',
		    	url : '/coinRateSend2',
		    	dataType :"text",
		    	data : data,
		    	success : function(res){
		    		$("#dataSelect").empty();
		    		console.log(res)
		    		html = res;
					$("#dataSelect").append(html);
					
		    	},
		    	error : function(res){
		    		alert(res)
		    	}
		    	
		   
		    })
		    
		    
		    
		    $("#dataSelect").empty();
		 	$('#data').empty();
		    
		})
		
		
	
	
		
		


		


   /*]]>*/
</script>


</body>
</html>
