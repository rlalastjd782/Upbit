package com.upbit.inquiry.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;

import com.upbit.inquiry.service.Impl.UpbitServiceImpl;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;

@Slf4j
@Controller
@RequiredArgsConstructor
public class UpbitController {

	
		private final UpbitServiceImpl upbitService;
		//메인페이지
		@GetMapping(value = "/")
		public String mainPage() {
			return "api/main";
			
		}
		//메인페이지
		//여기에 서비스임플 받아올수있나?
		
		@GetMapping(value = "/graph")
		public String graphPage(String all,Model model) {
			model.addAttribute("model",upbitService.getUpbitMarket(all));
			return "api/graph";
			
		}
		
		@GetMapping(value = "/analysis")
		public String analysisPage(String all,Model model) {
			model.addAttribute("model",upbitService.getUpbitMarket(all));
			return "api/analysis";
			
		}

		
		
		//필요없음
		// 특정 티커 조회
		@GetMapping(value = "v1/upbit/{ticker}")
		public String getUpbitTickerPrice(@PathVariable String ticker, Model model){
			model.addAttribute("upbitTickerPrice",  upbitService.getUpbitPrice(ticker));
			return "api/ticker";
		}
		//코인리스트를 가져오기 위해 만들어 놓음
		@GetMapping(value = "v1/market/{all}")
		public String getUpbitMaretkAll(@PathVariable String all, Model model){
			model.addAttribute("model",upbitService.getUpbitMarket(all));
			return "api/search";
		}

		


	
	
	
}
